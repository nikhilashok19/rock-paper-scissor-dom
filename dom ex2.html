<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>DOM Rock Paper Scissor</title>
</head>
<body>
  <!DOCTYPE html>
<html lang="en">

  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Rock Paper Scissor</title>
    <style>
      button {
    background-color: rgb(121, 82, 179);
    border: none;
    color: white;
    height: 30px;
    width: 100px;
    font-size: 10px;
    font-weight: bold;
    border-radius: 3px;
    margin-right: 5px;
    cursor: pointer;
    transition: background-color 0.15s;
  }

  button:hover{
    background-color: rgb(116, 65, 192);
  }

  button:active{
    opacity: 0.7;
  }

  p{
    font-family: roboto,arial;
    font-weight: 500;
    font-size: 20px;
  }

  .js-result,
  .js-moves{
    font-size: 16px;
  }

  @media only screen and (max-width:360px) {
    button{
      height: 18px;
    width: 60px;
    font-size: 8px;
    }
    .js-result,
  .js-moves{
    font-size: 12px;
  }
  p{
    font-size: 16px;
  }
  }

    </style>
  </head>

  <body>
    <p>Rock Paper Scissor</p>
    <button onclick="
      pickComputerMove();
      playGame('Rock');
      ">
      Rock
    </button>
    <button onclick="
     pickComputerMove();
     playGame('Paper');
      ">
      Paper
    </button>
    <button onclick="
     pickComputerMove();
    playGame('Scissor');
      ">
      Scissor
    </button>
    <p class="js-result"></p>
    <p class="js-moves"></p>
    <p class="js-score"></p>
    <button onclick="
    score.wins=0;
    score.losses=0;
    score.draws=0;
    //On reset we use localStorage.removeItem to delete the item from local storage 
    //BUt on page refresh after reset it will return null 

    localStorage.removeItem('score');
    displayScore();
    document.querySelector('.js-result')
        .innerHTML=``;

      document.querySelector('.js-moves')
        .innerHTML=``;
    ">
      Reset Score
    </button>

    <script>
      //Whenever page loads we will get value from local storage so to do this we have
      //to replace the object score values with

      // const score = {
      //   wins:0,
      //   losses:0,
      //   draws:0
      // };

      //This will get the saved values from local storage
      let score = JSON.parse(localStorage.getItem('score')) || {wins:0, losses:0, draws:0};
      let js_score=document.querySelector('.js-score');
        displayScore();
      //To solve the problem of reset which delete the item on line 67
      //we can use an if condition that if object is null then give it some default value but const
      //keyword will restrict updation so change type of const score to let score

      // if(score===null)
      // {
      //   score={
      //     wins:0,
      //     losses:0,
      //     draws:0
      //   }
      // }

      //To avoid if cond we can also use shortcut we know null is falsy value
      //In line 84 we can also write as 
      //let score = JSON.parse(localStorage.getItem('score')) || { wins:0, losses:0, draws:0};
      //Whenever left side is null which is falsy score will get default value from right side
      //and we can remove if condition then


      let computerMove = '';
      let result = '';

      function playGame(myMove)
      {
      if(myMove==='Rock')
      {
      if(myMove===computerMove){
      result='Draw';
      }
      else if(computerMove==='Paper'){
      result='You Lose';
      }
      else if(computerMove==='Scissor'){
      result='You Win';
      }
      }

      else if(myMove==='Paper'){
      if(myMove===computerMove){
      result='Draw';
      }
      else if(computerMove==='Scissor'){
      result='You Lose';
      }
      else if(computerMove==='Rock'){
      result='You Win';
      }

      }
      else if(myMove==='Scissor')
      {
      if(myMove===computerMove){
      result='Draw';
      }
      else if(computerMove==='Rock'){
      result='You Lose';
      }
      else if(computerMove==='Paper'){
      result='You Win';
      }
      }

      if(result==='You Win'){
        score.wins+=1;
      }
      else if(result==='You Lose')
      {
        score.losses+=1;
      }
      else if(result==='Draw')
      {
        score.draws+=1;
      }

      //Variables store values temp and will vanish on page refresh
      //Saving score in local storage so it does not vanish on page refresh
      localStorage.setItem('score', JSON.stringify(score));

      //We will get item whenever page loads so get item is in the top of the page where
      //object is created

      displayScore();
      document.querySelector('.js-result')
        .innerHTML=`Result: ${result}`;

      document.querySelector('.js-moves')
        .innerHTML=`Your Move: ${myMove} Computer Move: ${computerMove}`;

  }

      function pickComputerMove(){
      const randomNumber=Math.random();
      if(randomNumber>=0 && randomNumber<1/3)
      {
      computerMove='Rock';
      }
      else if(randomNumber>=1/3 && randomNumber<2/3)
      {
      computerMove='Paper';
      }
      else if(randomNumber>=2/3 && randomNumber<=1)
      {
      computerMove='Scissor';
      }

      }
      function displayScore()
      {
        js_score.innerHTML=`Wins: ${score.wins}, Losses: ${score.losses}, Draws: ${score.draws}`;
      }

    </script>
  </body>

</html>
</body>
</html>